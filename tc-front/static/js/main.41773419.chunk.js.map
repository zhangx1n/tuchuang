{"version":3,"sources":["components/NavMenu/index.module.scss","utils/crypto.js","utils/utils.js","constants/config.js","utils/http.js","apis/user.js","pages/MyFiles/FileUploadModal/index.js","pages/MyFiles/index.js","pages/ShareFiles/index.js","pages/ShareFiles/MyImageHosting/index.js","pages/error/E404/index.js","auth/checkAuth.js","pages/index.js","pages/DownloadRankingList/index.js","pages/error/E403/index.js","pages/Login/index.js","pages/Reg/index.js","pages/Logout/index.js","pages/ImageSharePage/index.js","components/NavMenu/menus.js","assets/logo200.png","components/NavMenu/index.js","components/PrivateRoute/index.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","crypto","require","md5Encrypt","str","createHash","update","digest","getCookie","cname","name","ca","decodeURIComponent","document","cookie","split","i","length","c","charAt","substring","indexOf","setCookie","obj","param","Object","prototype","toString","call","key","getFileSize","size","sizeType","finalSize","sizeLevel","toFixed","isPic","type","includes","HOST","httpPost","url","params","axios","post","then","res","status","data","code","undefined","message","error","Error","catch","baseUrl","getUserFilesInfo","token","user","count","start","getUserFilesInfoByPvAsc","getUserFilesInfoByPvDesc","getUserShareFilesCount","get","getUserShareFilesInfo","userShareFile","md5","filename","userDeleteFile","userCancelShareFile","userSaveShareFile","shareFileDownloadFlag","getShareFileDownloadRankingList","getShareImageHostingInfo","cancelShareImage","urlmd5","FileUploadModal","props","visible","onOk","footer","onRefresh","useState","fileList","getMD5OfFile","file","Promise","resolve","reject","blobSlice","File","slice","mozSlice","webkitSlice","chunkSize","chunks","Math","ceil","currentChunk","spark","SparkMD5","ArrayBuffer","fileReader","FileReader","loadNext","end","readAsArrayBuffer","onload","e","console","log","append","target","result","onerror","width","closable","okText","className","maxCount","onChange","customRequest","options","onSuccess","onError","uploadParams","onProgress","formData","FormData","success","content","beforeUpload","checkMD5OfFile","showUploadList","icon","UploadOutlined","random","confirm","Modal","Option","Select","MyFiles","columns","title","align","render","text","item","index","style","dataIndex","share_status","color","onClick","onDownloadFile","marginLeft","onShareFile","danger","ghost","onCancelShareFile","onDeleteFile","rowSelection","selectedRowKeys","selectedRows","setSelectedRows","refreshTable","queryData","refreshType","selectRefreshTypeKey","pageConfig","page_size","files","total","setData","setTotal","file_name","ExclamationCircleOutlined","responseType","userDownloadFileFlag","saveAsFile","onCancel","window","URL","createObjectURL","Blob","link","createElement","display","href","setAttribute","body","appendChild","click","hideUploadModal","setUploadVisible","getImageShareUrl","location","hostname","port","selectionType","uploadVisible","refreshTimer","setRefreshTimer","value","setSelectRefreshTypeKey","total_page","page_no","setPage","pagination","position","defaultCurrent","pageSize","current","showTotal","page","useEffect","getUserFilesCount","CloudUploadOutlined","ShareAltOutlined","selectedCounts","selectedFile","ClearOutlined","shareMyImage","transfer","focus","select","execCommand","blur","removeChild","copyImageUrl","errMsg","all","map","ReloadOutlined","setTimeout","labelInValue","defaultValue","dataSource","rowKey","record","E404","checkLoginToken","routes","path","exact","component","fixed","onSaveFile","num","onCancelShareImage","useLocation","CopyOutlined","selectedImage","setDataList","dataList","mainRoutes","from","state","pathname","isLoggedIn","loggedIn","setLoggedIn","loading","setLoading","to","layout","marginTop","onFinish","values","pwd","encryptPwd","login","userName","Item","rules","validator","_","backgroundColor","prefix","UserOutlined","placeholder","autoComplete","LockOutlined","block","border","htmlType","firstPwd","nickName","phone","email","register","test","MailOutlined","MobileOutlined","MehOutlined","logout","alignItems","justifyContent","search","setUrlMd5","time","pv","shareImageInfo","setShareImageInfo","setShowImageInfo","getShareImageUrl","paramString","urlMd5","URLSearchParams","getUrlMd5Params","browseShareImage","hoverable","column","label","height","src","fallback","menus","FolderOutlined","subMenus","AppstoreOutlined","FolderViewOutlined","FileImageOutlined","BarsOutlined","SettingOutlined","SubMenu","Menu","renderMenu","menu","Icon","subMenu","scss","NavMenu","collapsed","defaultOpenKeys","defaultSelectedKeys","username","navMenu","userInfo","alt","logoImage","mode","theme","inlineCollapsed","PrivateRoute","children","rest","config","top","duration","rtl","App","locale","zhCN","C","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.41773419.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"navMenu\":\"NavMenu_navMenu__24MT1\",\"userInfo\":\"NavMenu_userInfo__2qDhK\",\"username\":\"NavMenu_username__ECe2u\",\"role\":\"NavMenu_role__2_opQ\"};","const crypto = require('crypto');\n\n// md5 加密字符串\nfunction md5Encrypt(str) {\n    return crypto.createHash('md5').update(str).digest('hex')\n}\n\n// function test() {\n//    const testStr = 'jerry'\n//     const encryptStr = crypto.createHash('md5').update(testStr).digest('hex')\n//     console.log(encryptStr) // 期望值为 30035607ee5bb378c71ab434a6d05410\n//     result = encryptStr == '30035607ee5bb378c71ab434a6d05410'\n//     console.log(`测试结果为: ${result ? '通过测试': '未通过测试'}`)\n// }\n// test();\n\nmodule.exports = {\n    md5Encrypt\n}","\n// 判断是否是对象\nfunction isObj(param) {\n    return Object.prototype.toString.call(param) === '[object Object]'\n}\n\n// 获取cookie\nfunction getCookie(cname) {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) === 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n} \n\n// 设置cookie\nfunction setCookie(obj) {\n    // 如果传入的参数是对象 设置cookie\n    if (isObj(obj)) {\n        for(let key in obj) {\n            document.cookie = `${key}=${obj[key]};`\n        }\n    }\n}\n\n// 计算文件大小\nfunction getFileSize(size) {\n    const sizeType = ['B', 'KB', \"MB\"]\n    let finalSize = size\n\n    for (let sizeLevel = 0; sizeLevel < sizeType.length; sizeLevel++) {\n        if (finalSize > 1024) {\n            finalSize = finalSize / 1024\n            continue;\n        }else{\n            finalSize = finalSize.toFixed(2) + sizeType[sizeLevel]\n            break;\n        } \n    }\n    return finalSize\n}\n// 根据传入类型判断文件是否是图片\nfunction isPic(type) {\n    let picSuffixStr = 'jpg,jpeg,gif,png,bmp,pic'\n    let picSuffixArray = picSuffixStr.split(',')\n    return picSuffixArray.includes(type)\n}\n\nmodule.exports = {\n    getCookie,\n    setCookie,\n    getFileSize,\n    isPic\n}","const HOST_DEV = `localhost:3000`\nconst HOST_PRO = 'http://42.194.128.13'\n\nconst HOST = process.env.NODE_ENV === 'development' ? HOST_DEV : HOST_PRO\n\nmodule.exports = {\n    HOST\n}","import axios from 'axios';\nimport { message } from 'antd';\n\n\nexport function httpGet(url, params) {\n    return axios.get(url, { params }).then(res => {\n        const { status } = res\n        const { code } = res.data;\n        if (status !== 200) {\n            message.error('处理失败')\n            throw new Error('不为成功响应200')\n        }\n\n        if (code === undefined) { // 如果处理失败\n            message.error('处理失败');\n            throw new Error('code不为0,处理失败');\n        }\n\n        return res.data;\n    }).catch(error => {\n        message.error('处理失败')\n    })\n}\n\nexport function httpPost(url, params) {\n    return axios.post(url, params).then(res => {\n        const { status } = res\n        const { code = undefined } = res.data;\n        \n        if (status !== 200) {\n            message.error('处理失败')\n            throw new Error('不为成功响应200')\n        }\n\n        if (code === undefined) {// 如果处理失败\n            \n            throw new Error('返回code不为0,处理失败');\n        } \n\n        return res.data;\n    }).catch(error => {\n        message.error('处理失败');\n    })\n}\n\n","import { httpGet, httpPost } from '../utils/http'\n\nconst baseUrl = 'api'\n// 用户相关接口\n\n// 注册 \nexport const register = ({email, firstPwd, nickName, phone, userName}) => {\n   return httpPost(`${baseUrl}/reg`, {email, firstPwd, nickName, phone, userName})\n}\n\n// 登录 \nexport const login = ({user, pwd}) => {\n    return httpPost(`${baseUrl}/login`, {user, pwd})\n}\n\n// 获取用户文件数量 \nexport const getUserFilesCount = ({token, user}) => {\n    return httpPost(`${baseUrl}/myfiles?cmd=count`, {token, user})\n}\n\n// 获取用户文件信息 \nexport const getUserFilesInfo = ({token, user, count, start}) => {\n    return httpPost(`${baseUrl}/myfiles?cmd=normal`, {token, user, count, start})\n}\n\n// 按下载量升序显示用户文件列表\nexport const getUserFilesInfoByPvAsc = ({token, user, count, start}) => {\n    return httpPost(`${baseUrl}/myfiles?cmd=pvasc`, {token, user, count, start})\n}\n\n// 按下载量降序显示用户文件列表\nexport const getUserFilesInfoByPvDesc = ({token, user, count, start}) => {\n    return httpPost(`${baseUrl}/myfiles?cmd=pvdesc`, {token, user, count, start})\n}\n\n// 获取共享列表文件数量\nexport const getUserShareFilesCount = () => {\n    return httpGet(`${baseUrl}/sharefiles?cmd=count`, {})\n}\n\n// 获取共享列表文件信息\nexport const getUserShareFilesInfo = ({count, start}) => {\n    return httpPost(`${baseUrl}/sharefiles?cmd=normal`, {count, start})\n}\n\n// 用户分享文件\nexport const userShareFile = ({token, user, md5, filename}) => {\n    return httpPost(`${baseUrl}/dealfile?cmd=share`, {token, user, md5, filename})\n}\n\n// 用户删除文件\nexport const userDeleteFile = ({token, user, md5, filename}) => {\n    return httpPost(`${baseUrl}/dealfile?cmd=del`, {token, user, md5, filename})\n}\n\n// 用户文件下载标志处理\nexport const userDownloadFileFlag = ({token, user, md5, filename}) => {\n    return httpPost(`${baseUrl}/dealfile?cmd=pv`, {token, user, md5, filename})\n}\n\n// 用户取消分享文件\nexport const userCancelShareFile = ({user, md5, filename}) => {\n    return httpPost(`${baseUrl}/dealsharefile?cmd=cancel`, {user, md5, filename})\n}\n\n// 用户转存分享文件\nexport const userSaveShareFile = ({user, md5, filename}) => {\n    return httpPost(`${baseUrl}/dealsharefile?cmd=save`, {user, md5, filename})\n}\n\n// 分享文件下载标志处理\nexport const shareFileDownloadFlag = ({user, md5, filename}) => {\n    return httpPost(`${baseUrl}/dealsharefile?cmd=pv`, {user, md5, filename})\n}\n\n// 获取分享文件下载榜\nexport const getShareFileDownloadRankingList = ({count, start}) => {\n    return httpPost(`${baseUrl}/sharefiles?cmd=pvdesc`, {count, start})\n}\n\n// 上传文件前检查文件md5\nexport const checkMD5OfFile = ({token, md5, filename, user}) => {\n    return httpPost(`${baseUrl}/md5`, {token, md5, filename, user})\n}\n\n// 获取我的图片分享信息\nexport const getShareImageHostingInfo = ({token, user, start, count}) => {\n    return httpPost(`${baseUrl}/sharepic?cmd=normal`, {token, user, start, count})\n}\n\n// 图片分享\nexport const shareMyImage = ({token, user, md5, filename}) => {\n    return httpPost(`${baseUrl}/sharepic?cmd=share`, {token, user, md5, filename})\n}\n\n// 根据urlmd5获取分享图片\nexport const browseShareImage = ({urlmd5}) => {\n    return httpPost(`${baseUrl}/sharepic?cmd=browse`, {urlmd5})\n}\n\n// 取消图片分享\nexport const cancelShareImage = ({urlmd5, token, user}) => {\n    return httpPost(`${baseUrl}/sharepic?cmd=cancel`, {urlmd5, token, user})\n}","import React, { useState } from 'react';\nimport { Modal, Upload, message, Button } from 'antd';\nimport { UploadOutlined } from '@ant-design/icons';\n\nimport axios from 'axios'\nimport SparkMD5 from 'spark-md5'\nimport { checkMD5OfFile } from '../../../apis/user'\n\nexport default function FileUploadModal(props) {\n    const { visible, onOk, token, user, footer, onRefresh } = props\n    const [fileList, setFileList] = useState([])\n\n    // 上传组件需要的属性\n    const uploadProps = {\n        className: 'upload-list-inline', \n        maxCount: 1,\n        \n        // 上传文件被改变时\n        onChange: ({file, fileList}) => {\n            // 被beforeUpload拦截的文件没有 status属性\n            // // TODO: 注意 status为 uploading的文件不要移除!!!\n            // // 清除被拦截的文件\n            // if (file.md5 === '') {\n            //     fileList = []\n            // }\n            // // 清除上传成功 上传失败的文件\n            // const clearStatus = ['done', 'error']\n            // if (clearStatus.includes(file.status)) {\n            //     fileList = []\n            // }\n            // setFileList([...fileList])\n            // TODO: 上面的代码弄了以后不触发onChange了,本来是想弄个上传成功后自动移除的,恼火啊\n        },\n        \n    }\n    // 上传文件之前的逻辑\n    const beforeUpload = (file) => {\n        return new Promise((resolve, reject) => {\n            let isAbortUpload ;\n            const isLt10M = file.size / 1024 / 1024 < 10\n            if (!isLt10M) {\n                message.error('文件大小不能大于10M')\n                reject()\n            }\n            getMD5OfFile(file).then(md5 => {\n                checkMD5OfFile({ token, user, filename: file.name, md5})\n                .then(data => {\n                    // console.log('md5秒传的返回结果为:', data)\n                    const { code } = data\n                    switch (code) {\n                        // 秒传成功\n                        case 0:\n                            file.md5 = ''\n                            message.success('秒传成功')\n                            onRefresh()\n                            reject()\n                            break;\n                        // 秒传失败时需要上传文件\n                        case 1:\n                            file.md5 = md5\n                            // console.log('设置需发送给后端的md5值为:',md5)\n                            message.success({content: '等待文件上传', key: 'upload' })\n                            resolve()\n                            break;\n                        // token校验失败\n                        case 4:\n                            file.md5 = ''\n                            message.error('token校验失败,取消文件上传')\n                            reject()\n                            break;\n                        // 5.文件已存在\n                        default:\n                            file.md5 = ''\n                            message.error('文件已存在,取消文件上传')\n                            reject()\n                            break;\n                    }\n                })  \n            })\n        \n        })\n                            \n    }\n\n    // 自定义上传逻辑\n    const customRequest = (options) => {\n        // console.log('自定义上传', options)\n        const { onSuccess, onError, file, onProgress } = options\n        // 上传地址\n        const action = 'api/upload'\n        // 需要添加到formData中的参数\n        const uploadParams = {\n            user: user,\n            md5: file.md5,\n            size: file.size\n        }\n\n        let formData = new FormData();\n        \n        formData.append('file', file);\n\n        for(let param in uploadParams) {\n            formData.append(param, uploadParams[param])\n        }\n        // console.log('打印自定义上传时存储的md5:', uploadParams.md5)\n        \n        // 发送上传文件请求\n        axios.post(action, formData)\n        .then(res=> {\n            const { code } = res.data;\n            // 打印发送的请求数据\n            if (code === 0) {\n                message.success({content: '文件上传成功', key: 'upload'})\n                onSuccess()\n                onRefresh()\n            }else{\n                onError()\n            }\n        })\n        .catch(error => {\n            message.error('图片上传失败')\n            onError()\n\n        })\n    }\n\n    // 获取文件内容的md5值\n    const getMD5OfFile = (file) => {\n        return new Promise(function(resolve, reject){\n            let blobSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,\n            chunkSize = 2097152,   // 一次读取2MB\n            chunks = Math.ceil(file.size / chunkSize),\n            currentChunk = 0,\n            spark = new SparkMD5.ArrayBuffer(),\n            fileReader = new FileReader();\n\n            const loadNext = () => {\n                let start = currentChunk * chunkSize\n                let end = start + chunkSize >= file.size ? file.size : start + chunkSize\n                fileReader.readAsArrayBuffer(blobSlice.call(file, start, end))\n            }\n\n            fileReader.onload = function(e) {\n                console.log(`read chunk ${currentChunk + 1} of ${chunks}`)\n                spark.append(e.target.result)\n                currentChunk ++\n    \n                if (currentChunk < chunks) {\n                    loadNext()\n                }else{\n                    // console.log('文件读取完成')\n                    const md5 = spark.end()\n                    // console.log('产生的md5为:', md5)\n                    resolve(md5)\n                }\n            }\n\n            fileReader.onerror = function(e) {\n                console.log('文件读取出错')\n                reject('')\n            }  \n            loadNext()\n\n        })\n        \n        \n\n        \n        \n    }\n\n    return (\n        <Modal width={600} visible={visible} closable={false} okText=\"关闭\" onOk={onOk} footer={footer}  >\n            <div key={Math.random}>\n                <Upload \n                    {...uploadProps} \n                    customRequest={customRequest}\n                    beforeUpload={beforeUpload}\n                    fileList={fileList}\n                    showUploadList={true}\n                >\n                    <Button\n                        type=\"primary\"\n                        icon={<UploadOutlined />}\n                    >\n                        上传文件\n                    </Button>\n                </Upload>\n            </div> \n        </Modal>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport { CloudUploadOutlined, ShareAltOutlined, ClearOutlined, ReloadOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport { Button, Modal, Table, message, Tag, Select } from 'antd';\n\nimport { useLocation, Redirect, Link } from 'react-router-dom';\nimport axios from 'axios'\n\nimport { getUserFilesCount, getUserFilesInfo, userShareFile, userDeleteFile, userCancelShareFile,\n     userDownloadFileFlag, getUserFilesInfoByPvAsc, getUserFilesInfoByPvDesc, shareMyImage } from '../../apis/user';\nimport { getCookie, getFileSize, isPic } from '../../utils/utils'\nimport FileUploadModal from './FileUploadModal'\nimport { HOST } from '../../constants/config'\n\n\nconst { confirm } = Modal\nconst { Option } = Select\n\nexport default function MyFiles(props) {\n\n    const columns = [\n        {\n            title: '序号',\n            width: 50,\n            align: 'center',\n            // fixed: 'left',\n            render: (text, item, index) => <div style={{ width: 50 }}>{++index}</div>\n        },\n        {\n            title: '文件名',\n            width:100,\n            dataIndex: 'file_name',\n            align: 'center',\n            // fixed: 'left'\n        },\n        {\n            title: '分享状态',\n            width:100,\n            align: 'center',\n            dataIndex: 'share_status',\n            render: (share_status, item) => {\n                return (\n                    <div>\n                        {share_status === 1? <Tag color=\"green\">已共享</Tag> : <Tag color=\"blue\">未共享</Tag>}\n                    </div>\n                )\n            } \n        },\n        {\n            title: '下载量',\n            width:100,\n            align: 'center',\n            dataIndex: 'pv'\n        },\n        {\n            title: '文件大小',\n            width:120,\n            align: 'center',\n            dataIndex: 'size',\n            render: (size, item) => <div style={{ width: 100 }}>{getFileSize(size)}</div>\n        },\n        {\n            title: '文件类型',\n            width:100,\n            align: 'center',\n            dataIndex: 'type'\n        },\n        {\n            title: '创建时间',\n            width:100,\n            align: 'center',\n            dataIndex: 'create_time'\n        },\n        {\n            title: '操作',\n            align: 'center',\n            // fixed: 'right',\n            render: (text, item) => {\n                return (\n                    <>\n                        <Button type=\"primary\" size=\"small\" color=\"green\" onClick={() => onDownloadFile(item)}>下载</Button>\n                        {item.share_status === 0 ?\n                        <Button style={{ marginLeft: 6 }} type=\"primary\" color=\"blue\" size=\"small\" onClick={() => onShareFile(item)} >共享文件</Button>\n                        : <Button style={{ marginLeft: 6 }} danger ghost size=\"small\" onClick={() => onCancelShareFile(item)} >取消共享</Button> }\n                        <Button style={{ marginLeft: 6 }} type=\"primary\" danger size=\"small\" onClick={() => onDeleteFile(item)}>删除文件</Button>\n                    </>\n                )\n            }\n        }\n    ]\n\n    // 表格checkbox配置\n    const rowSelection = {\n        onChange: (selectedRowKeys, selectedRows) => {\n          setSelectedRows(selectedRows)\n        }\n    };\n    \n    // 点击刷新按钮时(做一下防抖)\n    const onRefreshBtnClick = () => {\n        if (refreshTimer) {\n            console.log('刷新按钮冷却中...')\n            return \n        }\n        refreshTable();\n        setRefreshTimer(setTimeout(() => {\n            setRefreshTimer(null)\n        }, 1000))\n    }\n    \n    // 刷新表格\n    const refreshTable = () => {\n\n        const queryData = refreshType[selectRefreshTypeKey].queryData\n        \n        // getUserFilesCount({token, user})\n        // .then(data => {\n        //     setTotal(data.num)\n        // })\n        queryData({token, user, count: pageConfig.page_size, start: 0})\n        .then(data => {\n            const { code = 0, files = [], total } = data;\n\n            if(code === 1){\n                message.error('登录已失效,请重新登录')\n                return \n            }\n            \n            setData(files);\n            setTotal(total)\n            message.success('刷新表格成功')\n        })\n    }\n\n    // 下载文件\n    const onDownloadFile = (item) => {\n        \n        const { url, file_name, md5 } = item\n        \n        confirm({\n            title: '确定下载该文件吗?',\n            icon: <ExclamationCircleOutlined />,\n            onOk() {\n                axios.get(url, {responseType: 'blob'})\n                .then(res => {\n                    const { data } = res\n                    // 向后端发送一个文件下载完成标志\n                    userDownloadFileFlag({token, user, md5, filename:file_name})\n                    .then(data => {\n                        console.log('下载完成标志:', data)\n                    })\n\n                    saveAsFile({data, file_name})\n                    refreshTable()\n                    \n                })\n            },\n            onCancel() {\n              console.log('取消下载文件');\n            },\n        });\n        \n    }\n\n    // 下载文件到本地并自动点击\n    const saveAsFile = ({data, file_name}) => {\n        \n        let url = window.URL.createObjectURL(new Blob([data]));\n        let link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        link.href = url;\n        link.setAttribute(\"download\", file_name);\n\n        document.body.appendChild(link);\n        link.click();\n    }\n    \n    // 分享文件\n    const onShareFile = (item) => {\n        userShareFile({token, user, md5: item.md5, filename: item.file_name})\n        .then(data => {\n            const { code } = data\n            switch (code) {\n                case 1:\n                    message.error('共享文件失败')\n                    break;\n                case 3:\n                    message.error('该文件已被分享')\n                    break;\n                case 4:\n                    message.error('token验证失败')\n                    break;\n                // 默认为0 \n                default:\n                    message.success('共享文件成功')\n                    refreshTable()\n                    break;\n            }\n        })\n    } \n    // 取消分享文件\n    const onCancelShareFile = (item) => {\n        userCancelShareFile({user, md5: item.md5, filename: item.file_name})\n        .then(data => {\n            const { code } = data\n            code === 0 ? message.success('文件取消分享成功') : message.error('文件取消分享失败');\n            // 刷新表格\n            refreshTable()\n        })\n    }\n\n    // 复制提取成功的图片url\n    const copyImageUrl = (urlmd5) => {\n        \n        let transfer = document.createElement('input');\n        document.body.appendChild(transfer);\n        transfer.value = getImageShareUrl(urlmd5)  // 这里表示想要复制的内容\n        transfer.focus();\n        transfer.select();\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n        }\n        transfer.blur();\n        message.success('提取链接已复制到剪切板')\n        document.body.removeChild(transfer);      \n    }\n\n    // 批量分享图片到图床(暂时只支持单张分享)\n    const shareMyImages = () => {\n        // console.log('点击了批量分享图片')\n        \n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中图片后再进行分享', 1)\n        }\n        // 如果选择的图片数大于1 提示暂不支持批量分享\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量分享', 1)\n        }\n        // // 如果选中的文件类型不是图片 提示无法放到图床\n        const selectedFile = selectedRows[0]\n        if (!isPic(selectedFile.type) ) {\n            return message.error('该文件不是图片,无法分享到图床', 1)\n        }\n        const { file_name:filename, md5 } = selectedFile\n        shareMyImage({token, user, filename, md5}).then(data => {\n            // console.log('分享图片接口返回数据:', data)\n            const { code, urlmd5 = \"\" } = data\n            // 如果code为0 为成功\n            if (code === 0) {\n                confirm({\n                    title: '分享链接',\n                    content: (<div>图片的链接信息: { getImageShareUrl(urlmd5) }</div>),\n                    onOk() {\n                        copyImageUrl(urlmd5)\n                        console.log('OK');\n                    },\n                    onCancel() {\n                      console.log('Cancel');\n                    },\n                });\n            }else{\n                let errMsg = code === 1 ? '接口调用失败' : 'token验证失败'\n                message.error(`${errMsg}`)\n            }\n            \n        })\n\n\n        \n    }\n    // 选择器的值改变时\n    const handleSelectChange = (item) => {\n        const { key } = item \n        setSelectRefreshTypeKey(key)\n    }\n\n    // 删除文件\n    const onDeleteFile = (item) => {\n        userDeleteFile({token, user, md5: item.md5, filename: item.file_name})\n        .then(data => {\n            const { code } = data\n            code === 0 ? message.success('文件删除成功') : message.error('文件删除失败')\n            refreshTable()\n        })\n    }\n    // 显示文件上传modal\n    const showUploadModal = () => {\n        setUploadVisible(true)\n    }\n    // 隐藏文件上传modal\n    const hideUploadModal = () => {\n        setUploadVisible(false)\n    }\n    // 多选时分享文件按钮(暂时不用,只能选中单个后分享)\n    const shareFiles = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中文件后再进行分享', 1)\n        }\n        // 如果选择的文件数大于1 提示暂不支持批量分享\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量分享', 1)\n        }\n        // 如果选中的文件 已被分享, 提示 该文件已被分享\n        const selectedFile = selectedRows[0]\n        if (selectedFile.share_status === 1) {\n            return message.error('该文件已被分享', 1)\n        }\n        // 进行文件分享\n        userShareFile({token, user, md5: selectedFile.md5, filename: selectedFile.file_name })\n        .then(data => {\n            const { code } = data  \n            if (code === 0) {\n                message.success('文件共享成功', 1)\n                refreshTable()\n            }\n        })\n    }\n    // 批量删除\n    const deleteFiles = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中\n        if (selectedCounts === 0) {\n            return message.error('请先选中文件后再进行删除', 1)\n        }\n        // 弹出确认框\n        confirm({\n            title: '是否确认删除文件?',\n            icon: <ExclamationCircleOutlined />,\n            content: '此操作不可撤销,是否继续?',\n            onOk() {\n                Promise.all(selectedRows.map(item => {\n                    const { md5, file_name: filename} = item;\n                    return userDeleteFile({ token, user, md5, filename})\n                })).then((result) => {\n                    message.success('删除文件成功', 1)\n                    refreshTable()\n                })\n                \n            },\n            onCancel() {\n                console.log('用户取消操作')\n            }\n        })\n    }\n    // 将 主机地址和 urlmd5等拼接成图片提取链接\n    const getImageShareUrl = (urlmd5) => {\n        return `${window.location.hostname}:${window.location.port}/share?urlmd5=${urlmd5}`\n    }\n\n    // 页码更改时\n    const changePage = (page) => {\n        const start = (page-1) * pageConfig.page_size\n\n        setPage({ ...pageConfig, page_no: page})\n        getUserFilesInfo({token, user, count: pageConfig.page_size, start: start})\n        .then(data => {\n            const {code, total, files = []} = data\n            // console.log('获取我的文件响应数据', data)\n            setData(files)\n            setTotal(total)\n            \n        }).catch(error => {\n            console.log('获取排行榜响应数据失败', error)\n        })\n        \n    }\n\n\n    const [token, setToken] = useState(getCookie('token'))\n    const [user, setUser] = useState(getCookie('userName'))\n    const [data, setData] = useState([])\n    const [total, setTotal] = useState(0)\n    const [selectionType, setSelectionType] = useState('checkbox');\n    const [uploadVisible, setUploadVisible] = useState(false)\n    const [selectedRows, setSelectedRows] = useState([])\n    let [refreshTimer, setRefreshTimer] = useState(null)\n    // 刷新时获取数据的方式(1正常/2下载量升序/3下载量降序)\n    const refreshType = [\n        {\n            key: 0,\n            value: '正常排序',\n            queryData: getUserFilesInfo\n        },{\n            key: 1,\n            value: '按下载量升序排序',\n            queryData: getUserFilesInfoByPvAsc\n        },{\n            key: 2,\n            value: '按下载量降序排序',\n            queryData: getUserFilesInfoByPvDesc\n        }\n    ]\n    const [selectRefreshTypeKey, setSelectRefreshTypeKey] = useState(0)\n\n\n    const [pageConfig, setPage] = useState({\n        total_page: 0, // 总页数\n        page_no: 1, // 当前页码\n        page_size: 10 // 每页数据条数\n    });\n\n    // 分页设置\n    const pagination = {\n        position: ['bottomRight'],\n        size: 'small',\n        defaultCurrent: 1,\n        total: total,\n        pageSize: pageConfig.page_size,\n        current: pageConfig.page_no,\n        showTotal: total => `共${total}条`,\n        onChange: changePage\n    }\n    \n    // 获取用户文件数量\n    useEffect(() => {\n        getUserFilesCount({token, user})\n        .then(data => {\n            \n            const {code, total} = data\n            // console.log('获取我的文件数量:', total)\n            if (code === 0 && total !== 0) {\n                setTotal(total)\n            }\n        })\n    \n    }, [])\n    \n    // 获取文件数据\n    useEffect(() => {\n        getUserFilesInfo({token, user, start: 0, count: pageConfig.page_size})\n        .then(data => {\n\n            // console.log('获取的我的文件数据:', data)\n\n            const { code, total, files=[] } = data\n            if (code === 0 && total === 0) {\n                // count为0时不解析files\n                setData([]);\n                setTotal(0)\n            }else{\n                setData(files);\n                setTotal(total)\n            }\n        })\n    }, [])\n\n    \n    return (\n        <div>\n            <div style={{marginLeft: 10 + 'px', display: 'flex'}}>\n                \n                <Button \n                    icon={<CloudUploadOutlined />}\n                    onClick={showUploadModal}\n                >上传</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ShareAltOutlined />}\n                    onClick={shareFiles}\n                >分享文件</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ClearOutlined />}\n                    onClick={shareMyImages}\n                >分享图片</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ClearOutlined />}\n                    onClick={deleteFiles}\n                >删除</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ReloadOutlined />}\n                    onClick={onRefreshBtnClick}\n                >刷新</Button>\n\n                <Select\n                    style={{marginLeft: 20, width: 140}}\n                    labelInValue\n                    defaultValue={refreshType[0]}\n                    onChange={handleSelectChange}\n                >\n                    {\n                        refreshType.map(item => {\n                            return <Option key={item.key}>{item.value}</Option>\n                        })\n                    }\n                </Select>\n            </div>\n            \n            <div className=\"container\">\n                <Table columns={columns}  \n                    dataSource={data}\n                    total={total} \n                    // scroll={{ x:1500 }} \n                    rowKey={(record, index) => index}\n                    pagination={pagination}\n                    rowSelection={{\n                        type: selectionType,\n                        ...rowSelection,\n                      }} \n                />\n            </div>\n            <FileUploadModal \n                visible={uploadVisible}  \n                onOk={hideUploadModal}\n                onRefresh={refreshTable} \n                token={token}\n                user={user}\n                footer={[\n                    <Button onClick={hideUploadModal} key='submit'>关闭</Button>\n                ]}      \n            />\n\n        </div>\n    )\n}","import React, { useState, useEffect } from 'react'\nimport { Button, Table, message, Tag, Modal } from 'antd'\nimport { CloudUploadOutlined, ShareAltOutlined, ReloadOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport axios from 'axios'\n\nimport { getUserShareFilesCount, getUserShareFilesInfo, userCancelShareFile, userSaveShareFile, shareFileDownloadFlag } from '../../apis/user'\nimport { getCookie, getFileSize } from '../../utils/utils'\n\nconst { confirm } = Modal\n\nexport default function ShareFiles() {\n\n    const columns = [\n        {\n            title: '序号',\n            width: 50,\n            align: 'center',\n            // fixed: 'left',\n            render: (text, item, index) => <div style={{ width: 50 }}>{++index}</div>\n        },\n        {\n            title: '用户名',\n            width: 70,\n            dataIndex: 'user',\n            align: 'center',\n            // fixed: 'left'\n        },\n        {\n            title: '文件名',\n            width:100,\n            dataIndex: 'file_name',\n            align: 'center',\n            fixed: 'left'\n        },\n        {\n            title: '分享状态',\n            width:100,\n            align: 'center',\n            dataIndex: 'share_status',\n            render: (share_status, item) => {\n                return (\n                    <div>\n                        {share_status === 1? <Tag color=\"green\">已共享</Tag> : <Tag color=\"blue\">未共享</Tag>}\n                    </div>\n                )\n            } \n        },\n        {\n            title: '下载量',\n            width:100,\n            align: 'center',\n            dataIndex: 'pv'\n        },\n        {\n            title: '文件大小',\n            width:120,\n            align: 'center',\n            dataIndex: 'size',\n            render: (size, item) => <div style={{ width: 100 }}>{getFileSize(size)}</div>\n        },\n        {\n            title: '文件类型',\n            width:100,\n            align: 'center',\n            dataIndex: 'type'\n        },\n        {\n            title: '创建时间',\n            width:100,\n            align: 'center',\n            dataIndex: 'create_time'\n        },\n        {\n            title: '操作',\n            align: 'center',\n            // width: 300,\n            // fixed: 'right',\n            render: (text, item) => {\n                return (\n                    <>\n                        <Button type=\"primary\" size=\"small\" color=\"green\" onClick={() => onDownloadFile(item)}>下载</Button>\n                        <Button style={{ marginLeft: 6 }} type=\"primary\" color=\"red\" size=\"small\" onClick={() => onSaveFile(item)}>转存</Button>\n                    </>\n                )\n            }\n        }\n    ]\n\n    // 表格checkbox配置\n    const rowSelection = {\n        onChange: (selectedRowKeys, selectedRows) => {\n          setSelectedRows(selectedRows)\n        }\n    };\n\n    // 点击刷新按钮时(做一下防抖)\n    const onRefreshBtnClick = () => {\n        if (refreshTimer) {\n            console.log('刷新按钮冷却中...')\n            return \n        }\n        refreshTable();\n        setRefreshTimer(setTimeout(() => {\n            setRefreshTimer(null)\n        }, 1000))\n    }\n      \n    // 刷新表格\n    const refreshTable = () => {\n        getUserShareFilesCount()\n        .then(data => {\n            setTotal(data.num)\n        }).catch(error => {\n            message.error('获取共享文件数量失败')\n        })\n\n        getUserShareFilesInfo({count: 10, start: 0})\n        .then(data => {\n            const { code, files = [] } = data;\n            setData(files);\n            message.success('刷新表格成功')\n        }).catch(error => {\n            message.error('获取共享文件信息失败')\n        })\n    }\n\n    // 下载文件\n    const onDownloadFile = (item) => {\n        \n        const { url, file_name, md5 } = item\n        \n        confirm({\n            title: '确定下载该文件吗?',\n            icon: <ExclamationCircleOutlined />,\n            onOk() {\n                axios.get(url, {responseType: 'blob'})\n                .then(res => {\n                    const { data } = res\n                    // 向后端发送一个共享文件下载完成标志\n                    shareFileDownloadFlag({ user, md5, filename:file_name})\n                    .then(data => {\n                        console.log('下载完成标志:', data)\n                    })\n\n                    saveAsFile({data, file_name})\n                    refreshTable()\n                    \n                })\n            },\n            onCancel() {\n              console.log('取消下载文件');\n            },\n        });   \n    }\n\n    // 批量下载图片\n    const downloadFiles = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中文件后再进行下载', 1)\n        }\n        // 如果选择的文件数大于1 提示暂不支持批量下载\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量下载', 1)\n        }\n        // 选中文件进行下载\n        const selectedFile = selectedRows[0]\n        \n        confirm({\n            title: '确定下载该文件吗?',\n            icon: <ExclamationCircleOutlined />,\n            onOk() {\n                axios.get(selectedFile.url, {responseType: 'blob'})\n                .then(res => {\n                    const { data } = res\n                    // 向后端发送一个共享文件下载完成标志\n                    shareFileDownloadFlag({ user, md5: selectedFile.md5, filename: selectedFile.file_name})\n                    .then(data => {\n                        console.log('下载完成标志:', data)\n                    })\n\n                    saveAsFile({data, file_name: selectedFile.file_name})\n                    refreshTable()\n                    \n                })\n            },\n            onCancel() {\n              console.log('取消下载文件');\n            },\n        }); \n        \n    }\n    // 批量转存\n    const saveFiles = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中文件后再进行转存', 1)\n        }\n        // 如果选择的文件数大于1 提示暂不支持批量转存\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量转存', 1)\n        }\n        // 选中文件\n        const selectedFile = selectedRows[0]\n\n        confirm({\n            title: '确定转存该文件吗?',\n            icon: <ExclamationCircleOutlined />,\n            onOk() {\n                 \n                userSaveShareFile({ user, md5: selectedFile.md5, filename: selectedFile.file_name})\n                .then(data => {\n                    const { code } = data\n                    switch (code) {\n                        // 转存成功\n                        case 0:\n                            message.success('文件转存成功')\n                            break;\n                        // 转存失败\n                        case 1:\n                            message.error('文件转存失败')\n                            break;\n                        // code为5时,文件已存在\n                        default:\n                            message.error('文件已存在')\n                            break;\n                    }\n                })\n\n                refreshTable()\n        \n            },\n            onCancel() {\n              console.log('取消转存文件');\n            },\n        }); \n        \n    }\n    // 批量取消共享\n    const cancelShareFiles = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中文件后再进行取消共享', 1)\n        }\n        // 如果选择的文件数大于1 提示暂不支持批量取消共享\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量取消共享', 1)\n        }\n        // 选中文件\n        const selectedFile = selectedRows[0]\n        confirm({\n            title: '确定取消该文件共享吗?',\n            icon: <ExclamationCircleOutlined />,\n            onOk() {\n                userCancelShareFile({user, md5: selectedFile.md5, filename: selectedFile.file_name})\n                .then(data => {\n                    const { code } = data\n                    code === 0 ? message.success('文件取消分享成功') : message.error('文件取消分享失败');\n                    // 刷新表格\n                    refreshTable()\n                })\n            },\n            onCancel() {\n                console.log('用户取消操作')\n            }\n        })\n    }\n\n    // 下载文件到本地并自动点击\n    const saveAsFile = ({data, file_name}) => {\n        \n        let url = window.URL.createObjectURL(new Blob([data]));\n        let link = document.createElement(\"a\");\n        link.style.display = \"none\";\n        link.href = url;\n        link.setAttribute(\"download\", file_name);\n\n        document.body.appendChild(link);\n        link.click();\n    }\n    // 转存文件\n    const onSaveFile = (item) => {\n        userSaveShareFile({user, md5: item.md5, filename: item.file_name})\n        .then(data => {\n            const { code } = data\n            switch (code) {\n                // 转存成功\n                case 0:\n                    message.success('文件转存成功')\n                    break;\n                // 转存失败\n                case 1:\n                    message.error('文件转存失败')\n                    break;\n                // code为5时,文件已存在\n                default:\n                    message.error('文件已存在')\n                    break;\n            }\n        })\n    }\n\n    // 页面更改时\n    const changePage = (page) => {\n        const start = (page-1) * pageConfig.page_size\n\n        setPage({ ...pageConfig, page_no: page})\n        getUserShareFilesInfo({count: pageConfig.page_size, start: start})\n        .then(data => {\n            const {code, total, files = []} = data\n            // console.log('获取的排行榜响应数据', data)\n            setData(files)\n            setTotal(total)   \n        }).catch(error => {\n            console.log('获取排行榜响应数据失败', error)\n        })\n        \n    }\n\n    const [total, setTotal] = useState(0)\n    const [data, setData] = useState([])\n    const [user, setUser] = useState(getCookie('userName'))\n    const [selectionType, setSelectionType] = useState('checkbox')\n    const [selectedRows, setSelectedRows] = useState([])\n    const [refreshTimer, setRefreshTimer] = useState(null)\n\n    const [pageConfig, setPage] = useState({\n        total_page: 0, // 总页数\n        page_no: 1, // 当前页码\n        page_size: 10 // 每页数据条数\n    });\n\n    // 分页设置\n    const pagination = {\n        position: ['bottomRight'],\n        size: 'small',\n        defaultCurrent: 1,\n        total: total,\n        pageSize: pageConfig.page_size,\n        current: pageConfig.page_no,\n        showTotal: total => `共${total}条`,\n        onChange: changePage\n    }\n\n    // 获取共享文件数量\n    useEffect(() => {\n        getUserShareFilesCount()\n        .then(data => {\n            // console.log('共享文件数量接口返回的数据:', data)\n            const {code, total} = data\n            // console.log('获取共享文件数量:', total)\n            if (code === 0 && total !== 0) {\n                setTotal(total)\n            }\n        }).catch(error => {\n            message.error('获取共享文件数量失败')\n        })\n    \n    }, [])\n    \n    // 获取文件数据\n    useEffect(() => {\n        getUserShareFilesInfo({start: 0, count: pageConfig.page_size})\n        .then(data => {\n\n            // console.log('获取的共享文件数据:', data)\n\n            const { code = undefined, total, files=[] } = data\n\n            if (code === undefined) {\n                message.error('获取共享文件数据失败')\n            }\n\n            if (code === 0 && total === 0) {\n                // count为0时不解析files\n                setData([]);\n            }else{\n                setData(files);\n            }\n        }).catch(error => {\n            message.error('获取共享文件信息失败')\n        })\n    }, [])\n\n\n    return (\n        <div>\n            <div style={{marginLeft: 10 + 'px', display: 'flex'}}>\n                \n                <Button \n                    icon={<CloudUploadOutlined />}\n                    onClick={saveFiles}\n                >转存</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ShareAltOutlined />}\n                    onClick={downloadFiles}\n                >下载</Button>\n                \n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ReloadOutlined />}\n                    onClick={onRefreshBtnClick}\n                >刷新</Button>\n            </div>\n            \n            <div className=\"container\">\n                <Table columns={columns}  \n                    dataSource={data}\n                    total={total} \n                    // scroll={{  }} \n                    rowKey={(record, index) => index}\n                    pagination ={pagination}\n                    rowSelection={{\n                        type: selectionType,\n                        ...rowSelection,\n                      }} \n                />\n            </div>\n        </div>\n    )\n}","import React, { useEffect, useState } from 'react';\nimport { CloudUploadOutlined, ShareAltOutlined, ClearOutlined, ReloadOutlined, ExclamationCircleOutlined, SwitcherOutlined, CopyOutlined } from '@ant-design/icons';\nimport { Button, Modal, Table, message, Tag } from 'antd';\n\nimport { getShareImageHostingInfo, shareMyImage, browseShareImage, cancelShareImage } from '../../../apis/user';\nimport { getCookie, getFileSize } from '../../../utils/utils'\nimport { useLocation } from 'react-router';\n// import { HOST } from '../../../constants/config'\n\nconst { confirm } = Modal\n\nexport default function MyImageHosting(props) {\n\n    const columns = [\n        {\n            title: '序号',\n            width: 50,\n            align: 'center',\n            fixed: 'left',\n            render: (text, item, index) => <div style={{ width: 50 }}>{++index}</div>\n        },\n        {\n            title: '用户名',\n            width: 70,\n            dataIndex: 'user',\n            align: 'center',\n            fixed: 'left'\n        },\n        {\n            title: '图片名称',\n            width:150,\n            dataIndex: 'file_name',\n            align: 'center',\n            fixed: 'left'\n        },\n        {\n            title: '浏览次数',\n            width:100,\n            align: 'center',\n            dataIndex: 'pv'\n        },\n        {\n            title: '图片提取地址',\n            width: 150,\n            align: 'center',\n            dataIndex: 'urlmd5',\n            render: (text, item, index) => <div>{ getImageShareUrl(item.urlmd5) }</div>\n        },\n        {\n            title: '创建时间',\n            width: 100,\n            align: 'center',\n            dataIndex: 'create_time'\n        },\n        {\n            title: '操作',\n            align: 'center',\n            fixed: 'right',\n            render: (text, item) => {\n                return (\n                    <>\n                        <Button type=\"primary\" size=\"small\" color=\"green\" onClick={() => onCancelShareImage(item)}>取消分享</Button>\n                        <Button style={{marginLeft: 20}} type=\"primary\" size=\"small\" color=\"green\" onClick={() => copyImageUrl(item)}>复制链接</Button>\n                    </>\n                )\n            }\n        }\n    ]\n\n    // 表格checkbox配置\n    const rowSelection = {\n        onChange: (selectedRowKeys, selectedRows) => {\n          setSelectedRows(selectedRows)\n        }\n    };\n    \n    // 刷新表格\n    const refreshTable = () => {\n        \n        getShareImageHostingInfo({token, user, count: pageConfig.page_size, start: 0})\n        .then(data => {\n            const { code, files = [], total = 0 } = data;\n            setData(files);\n            setTotal(total)\n            message.success('刷新表格成功')\n        })\n        \n    }\n    \n    \n    // 取消分享图片\n    const onCancelShareImage = (item) => {\n        cancelShareImage({user, token, urlmd5: item.urlmd5 }).then(data => {\n            const { code } = data\n            code === 0 ? message.success('文件取消分享成功') : message.error('文件取消分享失败');\n            // 刷新表格\n            refreshTable()\n        })\n    }\n\n    // 多选时取消分享按钮(暂时不用,只能选中单个后取消分享)\n    const onCancelShareImages = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中文件后再进行取消分享', 1)\n        }\n        // 如果选择的文件数大于1 提示暂不支持批量分享\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量取消分享', 1)\n        }\n        \n        const selectedFile = selectedRows[0]\n        const { urlmd5  } = selectedFile\n        // 加入取消分享图片的逻辑\n        cancelShareImage({ urlmd5, token, user }).then(data => {\n            const { code } = data\n            if (code === 0) {\n                message.success('图片取消分享成功')\n            }else{\n                let errMsg = code === 1 ? '取消分享失败' : 'token验证失败'\n                message.error(errMsg)\n            }\n            refreshTable()\n        })\n\n    }\n    // 将 主机地址和 urlmd5等拼接成图片提取链接\n    const getImageShareUrl = (urlmd5) => {\n        return `${window.location.hostname}/share?urlmd5=${urlmd5}`\n    }\n\n    // 页码更改时\n    const changePage = (page) => {\n        const start = (page-1) * pageConfig.page_size\n\n        setPage({ ...pageConfig, page_no: page})\n        getShareImageHostingInfo({ token, user, count: pageConfig.page_size, start: start})\n        .then(data => {\n            const {code, total, files = []} = data\n            // console.log('获取的我的分享图片响应数据', data)\n            setData(files)\n            setTotal(total)\n            \n        }).catch(error => {\n            console.log('获取我的分享图片响应数据失败', error)\n        })   \n    }\n    // 复制提取成功的图片url\n    const copyImageUrl = (item) => {\n        \n        let transfer = document.createElement('input');\n        document.body.appendChild(transfer);\n        transfer.value = getImageShareUrl(item.urlmd5)  // 这里表示想要复制的内容\n        transfer.focus();\n        transfer.select();\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n        }\n        transfer.blur();\n        message.success('已复制到剪切板')\n        document.body.removeChild(transfer);      \n    }\n    // 表格上面的复制链接按钮\n    const copyImageUrls = () => {\n        const selectedCounts = selectedRows.length\n        // 如果未选中 提示不支持\n        if (selectedCounts === 0) {\n            return message.error('请先选中图片后再进行复制链接', 1)\n        }\n        // 如果选择的文件数大于1 提示暂不支持批量分享\n        if (selectedCounts > 1) {\n            return message.error('暂不支持批量复制链接', 1)\n        }\n        const selectedImage = selectedRows[0]\n        copyImageUrl(selectedImage)\n    }\n\n\n    const [token, setToken] = useState(getCookie('token'))\n    const [user, setUser] = useState(getCookie('userName'))\n    const [data, setData] = useState([])\n    const [total, setTotal] = useState(0)\n    const [selectionType, setSelectionType] = useState('checkbox');\n    const [selectedRows, setSelectedRows] = useState([])\n    const location = useLocation()\n\n    const [pageConfig, setPage] = useState({\n        total_page: 0, // 总页数\n        page_no: 1, // 当前页码\n        page_size: 10 // 每页数据条数\n    });\n\n    // 分页设置\n    const pagination = {\n        position: ['bottomRight'],\n        size: 'small',\n        defaultCurrent: 1,\n        total: total,\n        pageSize: pageConfig.page_size,\n        current: pageConfig.page_no,\n        showTotal: total => `共${total}条`,\n        onChange: changePage\n    }\n    \n    // 获取我的共享图片数据\n    useEffect(() => {\n        getShareImageHostingInfo({token, user, start: 0, count: pageConfig.page_size})\n        .then(data => {\n\n            // console.log('获取的我的图片分享数据:', data)\n\n            const { code, total, files=[] } = data\n            if (code === 0 && total === 0) {\n                // count为0时不解析files\n                setData([]);\n                setTotal(0)\n            }else{\n                setData(files);\n                setTotal(total)\n            }\n        })\n    }, [])\n\n    \n    return (\n        <div>\n            <div style={{marginLeft: 10 + 'px', display: 'flex'}}>\n                \n                <Button\n                    icon={<ShareAltOutlined />}\n                    onClick={onCancelShareImages}\n                >取消分享</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<CopyOutlined />}\n                    onClick={copyImageUrls}\n                >复制链接</Button>\n                <Button \n                    style={{marginLeft: 20}}\n                    icon={<ReloadOutlined />}\n                    onClick={refreshTable}\n                >刷新</Button>\n            </div>\n            \n            <div className=\"container\">\n                <Table columns={columns}  \n                    dataSource={data}\n                    total={total} \n                     \n                    rowKey={(record, index) => index}\n                    pagination={pagination}\n                    rowSelection={{\n                        type: selectionType,\n                        ...rowSelection,\n                      }} \n                />\n            </div>\n\n        </div>\n    )\n}","import React from 'react';\n\nexport default function E404() {\n    return <div>404</div>\n}","import { getCookie } from '../utils/utils';\n\n// 检查cookie中是否有token,用于判断用户是否登录\nconst checkLoginToken = () => {\n    const token = getCookie('token');\n    return !!token\n}\n\nexport default checkLoginToken;\n","import Home from './Home';\n\n//业务模块\nimport MyFiles from './MyFiles';\nimport ShareFiles from './ShareFiles';\nimport DownloadRankingList from './DownloadRankingList';\nimport MyImageHosting from './ShareFiles/MyImageHosting';\n\n//通用模块\nimport E404 from './error/E404';\nimport E403 from './error/E403';\nimport Login from './Login';\nimport Reg from './Reg'\nimport Logout from './Logout'\nimport ImageSharePage from './ImageSharePage';\n\n\n\nexport const routes = [\n  {\n    path: '/',\n    exact: true,\n    component: MyFiles\n  },\n  {\n    path: '/myFiles',\n    exact: true,\n    component: MyFiles\n  },\n  {\n    path: '/shareFiles',\n    exact: true,\n    component: ShareFiles\n  },\n  {\n    path: '/myShareImages',\n    exact: true,\n    component: MyImageHosting\n  },\n  {\n    path: '/downloadRankingList',\n    exact: true,\n    component: DownloadRankingList\n  },\n  {\n    path: '/403',\n    exact: true,\n    component: E403\n  },\n  {\n    path: '*',\n    exact: true,\n    component: E404\n  }\n];\n\nexport const mainRoutes = [\n  {\n    path: '/login',\n    exact: true,\n    component: Login\n  },\n  {\n    path: '/reg',\n    exact: true,\n    component: Reg\n  },\n  {\n    path: '/logout',\n    exact: true,\n    component: Logout\n  },\n  {\n    path: '/share',\n    exact: true,\n    component: ImageSharePage\n  },\n  {\n    path: '/404',\n    exact: true,\n    component: E404,\n  }\n];\n","import React, {useEffect, useState} from 'react'\nimport { Table, Button, message } from 'antd'\nimport { ReloadOutlined } from '@ant-design/icons';\nimport { getShareFileDownloadRankingList } from '../../apis/user'\n\n\n\nexport default function DownloadRankingList(props) {\n\n    const columns = [{\n        title: '排名',\n        width: 50,\n        align: 'center',\n        render: (text, item, index) => <div style={{ align: 'center' }}>{++index}</div>\n    },{\n        title: '文件名',\n        width: 100,\n        align: 'center',\n        dataIndex: 'filename',\n    },{\n        title: '下载量',\n        width: 100,\n        align: 'center',\n        dataIndex: 'pv'\n    }]\n\n    // 点击刷新按钮时(做一下防抖)\n    const onRefreshBtnClick = () => {\n        if (refreshTimer) {\n            console.log('刷新按钮冷却中...')\n            return \n        }\n        refreshTable();\n        setRefreshTimer(setTimeout(() => {\n            setRefreshTimer(null)\n        }, 1000))\n    }\n\n    // 刷新\n    const refreshTable = () => {\n        getShareFileDownloadRankingList({count: pageConfig.page_size, start:0})\n        .then(data => {\n            const {code, files = []} = data\n            // console.log('获取的排行榜响应数据', data)\n            setDataList(files)\n            \n        }).catch(error => {\n            console.log('获取排行榜响应数据失败', error)\n        })\n    }\n\n    // 页面更改时\n    const changePage = (page) => {\n        const start = (page-1) * pageConfig.page_size\n\n        setPage({ ...pageConfig, page_no: page})\n        getShareFileDownloadRankingList({count: pageConfig.page_size, start: start})\n        .then(data => {\n            const {code, total, files = []} = data\n            // console.log('获取的排行榜响应数据', data)\n            setDataList(files)\n            \n        }).catch(error => {\n            console.log('获取排行榜响应数据失败', error)\n        })\n        \n    }\n\n    const [total, setTotal] = useState(0)\n    const [dataList, setDataList] = useState([])\n    const [refreshTimer, setRefreshTimer] = useState(null)\n\n    const [pageConfig, setPage] = useState({\n        total_page: 0, // 总页数\n        page_no: 1, // 当前页码\n        page_size: 10 // 每页数据条数\n    });\n    \n    // 首次刷新\n    useEffect(() => {\n        getShareFileDownloadRankingList({count:pageConfig.page_size, start:0})\n        .then(data => {\n            const {code, total, files = []} = data\n            // console.log('获取的排行榜响应数据', data)\n            setDataList(files)\n            setTotal(total)\n        }).catch(error => {\n            message.error('获取排行榜数据失败')\n        })\n    }, [])\n\n    // 分页设置\n    const pagination = {\n        position: ['bottomRight'],\n        size: 'small',\n        defaultCurrent: 1,\n        total: total,\n        pageSize: pageConfig.page_size,\n        current: pageConfig.page_no,\n        showTotal: total => `共${total}条`,\n        onChange: changePage\n    }\n\n    return (\n        <div>\n            <div style={{marginLeft: 10 + 'px', display: 'flex'}}>\n                <Button \n                    icon={<ReloadOutlined />}\n                    onClick={onRefreshBtnClick}\n                >刷新</Button>\n            </div>\n            <div className=\"container\">\n                <Table columns={columns}  \n                    dataSource={dataList}\n                    total={total}  \n                    rowKey={(item, index) => index}\n                    pagination={pagination} \n                />\n            </div>\n        </div>\n        \n    )\n}","import React from 'react';\n\nexport default function E403() {\n    return <div>403</div>\n}","import React, { useState } from 'react';\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\nimport { Input, Button, Form, message } from 'antd';\nimport { useLocation, Redirect, Link } from 'react-router-dom';\nimport { login } from '../../apis/user';\nimport { md5Encrypt } from '../../utils/crypto';\nimport './index.scss'\nimport checkLoginToken from '../../auth/checkAuth';\nimport { setCookie } from '../../utils/utils'\n\n\nexport default function Login(props) {\n    const location = useLocation();\n    const { from } = location.state || { from: { pathname: \"/\" } };\n    // 检查cookies中是否有token\n    const isLoggedIn = checkLoginToken()\n    const [loggedIn, setLoggedIn] = useState(isLoggedIn);\n    const [loading, setLoading] = useState(false);\n\n\n    // 校验user字段的校验器 6-16位\n    const userValidator = (_, value) => {\n        return value && value.length >= 4 && value.length <= 16 ? Promise.resolve() : Promise.reject('用户名长度为4-16位字符')\n    }\n    // 校验pwd字段的校验器 6-16位\n    const pwdValidator = (_, value) => {\n        return value && value.length >= 4 && value.length <= 16 ? Promise.resolve() : Promise.reject('密码长度为4-16字符') \n    }\n\n    const onFinish = (values) => {\n        const { user, pwd } = values;\n        setLoading(true);\n        // 对密码进行md5加密\n        const encryptPwd = md5Encrypt(pwd);\n        login({ user, pwd: encryptPwd }).then(data => {\n            setLoading(false);\n            // 登录成功后获取token并保存\n            const {code, token} = data\n            switch (code) {\n                case 1:\n                    message.error('登录失败')\n                    break;\n            \n                default:\n                    setCookie({userName:user, token})\n                    setLoggedIn(true);\n                    break;\n            }\n\n        }).catch(error => {\n            setLoading(false)\n        })\n    }\n    if (loggedIn) {\n        return <Redirect to={{ pathname: from.pathname }} />\n    }\n\n    return (\n\n        <div className=\"login_container\">\n            <div className=\"login\">\n                <Form layout=\"vertical\" style={{ width: 396, marginTop: 80 }} onFinish={onFinish}>\n                    <Form.Item name=\"user\"\n                        \n                        rules={[\n                            {\n                            validator: userValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            size=\"large\"\n                            prefix={<UserOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"用户名\"\n                            autoComplete=\"off\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item name=\"pwd\"\n                        rules={[\n                            {\n                            validator: pwdValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            type=\"password\"\n                            size=\"large\"\n                            prefix={<LockOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"密码\"\n                        />\n                    </Form.Item>\n                    <Form.Item>\n                        <Button block style={{ backgroundColor: '#00A4DD', color: '#FFFFFF', border: 'none' }} size=\"large\" type=\"primary\" htmlType=\"submit\" loading={loading}>登录</Button>\n                        <Link to={{\n                            pathname: '/reg'\n                        }}>\n                            <div className=\"reg_link\">注册账号</div>\n                        </Link>\n                        \n                    </Form.Item>\n                </Form>\n            </div>\n\n        </div>\n        \n    );\n}","import React, { useEffect, useState } from 'react';\nimport { LockOutlined, UserOutlined, MailOutlined, MobileOutlined, MehOutlined } from '@ant-design/icons';\nimport { Input, Button, Form, message } from 'antd';\nimport { useLocation, Redirect, Link } from 'react-router-dom';\nimport { register } from '../../apis/user';\nimport { md5Encrypt } from '../../utils/crypto';\nimport './index.scss'\nimport checkLoginToken from '../../auth/checkAuth';\n\n\nexport default function Reg(props) {\n    const location = useLocation();\n    const { from } = location.state || { from: { pathname: \"/\"} };\n    // 检查cookies中是否有token\n    const isLoggedIn = checkLoginToken()\n    const [loggedIn, setLoggedIn] = useState(isLoggedIn);\n    const [loading, setLoading] = useState(false);\n\n    // 校验userName字段的校验器 4-16位\n    const userNameValidator = (_, value) => {\n        return value && value.length >= 4 && value.length <= 16 ? Promise.resolve() : Promise.reject('用户名长度为4-16位字符')\n    }\n    // 校验firstPwd字段的校验器 4-16位\n    const pwdValidator = (_, value) => {\n        return value && value.length >= 4 && value.length <= 16 ? Promise.resolve() : Promise.reject('密码长度为4-16字符') \n    }\n    // 校验email字段的校验器(可不填)\n    const emailValidator = (_, value) => {\n        const reEmail = /[a-zA-Z0-9_.+-]+@[a-zA-Z0-9_-]+\\.[a-zA-Z0-9-.]+/\n        return !value || value.length === 0 ? Promise.resolve() : ( reEmail.test(value) ? Promise.resolve() : Promise.reject('请输入正确的邮箱格式') )\n    }\n\n    // 校验nickName字段的校验器(1-16位)\n    const nickNameValidator = (_, value) => {\n        return value && value.length >= 1 && value.length <= 16 ? Promise.resolve() : Promise.reject('昵称长度为1-16位字符')\n    }\n\n    // 校验phone字段的校验器(可不填)\n    const phoneValidator = (_, value) => {\n        const rePhone = /^1(3\\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\\d|9[0-35-9])\\d{8}$/\n        return !value || value.length === 0 ? Promise.resolve() : (rePhone.test(value) ? Promise.resolve() : Promise.reject('请输入正确的手机号码'))\n    }\n\n    const onFinish = (values) => {\n        \n        const { userName, firstPwd, nickName, phone='', email=''} = values;\n        const key = 'register'\n        message.loading({content: '正在注册...', key})\n        \n        setLoading(true);\n        // 对密码进行md5加密\n        const encryptPwd = md5Encrypt(firstPwd);\n        register({ userName, firstPwd: encryptPwd, nickName, phone, email }).then(data => {\n            setLoading(false);\n            const { code } = data\n            switch (code) {\n                case 0:\n                    message.success({content: '注册成功', key})\n                    break;\n                case 1:\n                    message.error({content: '注册失败', key})\n                    break;\n                default:\n                    message.error({content: '该用户已存在', key})\n                    break;\n            }\n            \n        }).catch(error => {\n            setLoading(false)\n            message.error('处理失败')\n        })\n    }\n\n    if (loggedIn) {\n        return <Redirect to={{ pathname: from.pathname }} />\n    }\n\n    return (\n        <div className=\"reg_container\">\n            <div className=\"reg\">\n                <Form layout=\"vertical\" style={{ width: 396, marginTop: 90 }} onFinish={onFinish}>\n                    <Form.Item name=\"userName\"\n                        \n                        rules={[\n                            {\n                            validator: userNameValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            size=\"large\"\n                            prefix={<UserOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"用户名\"\n                            autoComplete=\"off\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item name=\"firstPwd\"\n                        rules={[\n                            {\n                            validator: pwdValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            type=\"password\"\n                            size=\"large\"\n                            prefix={<LockOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"密码\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item name=\"email\"\n                        rules={[\n                            {\n                            validator: emailValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            size=\"large\"\n                            type=\"email\"\n                            prefix={<MailOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"邮箱(非必填)\"\n                            autoComplete=\"off\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item \n                        name=\"phone\"\n                        rules={[\n                            {\n                            validator: phoneValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            size=\"large\"\n                            prefix={<MobileOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"手机号码(非必填)\"\n                            autoComplete=\"off\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item name=\"nickName\"\n                        rules={[\n                            {\n                            validator: nickNameValidator  \n                            }\n                        ]}>\n                        <Input\n                            style={{ backgroundColor: 'rgba(0,164,221,.1)', color: '#00A4DD' }}\n                            size=\"large\"\n                            prefix={<MehOutlined style={{ color: '#00A4DD' }} />}\n                            placeholder=\"用户昵称\"\n                            autoComplete=\"off\"\n                        />\n                    </Form.Item>\n\n                    <Form.Item>\n                        <Button block style={{ backgroundColor: '#00A4DD', color: '#FFFFFF', border: 'none' }} size=\"large\" type=\"primary\" htmlType=\"submit\" loading={loading}>注册</Button>\n                        <Link to={{\n                            pathname: '/login'\n                        }}>\n                            <div className=\"login_link\">去登录</div>\n                        </Link>\n                        \n                    </Form.Item>\n                </Form>\n            </div>\n\n        </div>\n        \n    )\n\n    \n}\n","import React, { useState, useEffect } from 'react';\nimport { LockOutlined, UserOutlined } from '@ant-design/icons';\nimport { Input, Button, Form } from 'antd';\nimport { useLocation, Redirect } from 'react-router-dom';\nimport { setCookie } from '../../utils/utils'\n\nexport default function Logout(props) {\n    const [loggedIn, setLoggedIn] = useState(true);\n    useEffect(() => {\n        logout().then(() => {\n            \n            setLoggedIn(false);\n        });\n    }, []);\n\n    const logout = () => {\n        return new Promise((resolve, reject) => {\n            // 将设置的cookie值覆盖为空字符串\n            setCookie({userName: '', token: ''})\n            resolve()\n        })\n    }\n\n    if (!loggedIn) {\n        return <Redirect to={{ pathname: '/login' }} />\n    }\n\n    return (\n        <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"center\", marginTop: 100 }}>\n            正在退出登录...\n        </div>\n    );\n}","import React, {useEffect, useState} from 'react'\nimport { Modal, Button, Input, Tooltip, Form, message, Card, Descriptions, Image } from 'antd'\nimport { CopyOutlined } from '@ant-design/icons';\nimport { useLocation, Redirect  } from 'react-router-dom'\n\nimport { browseShareImage } from '../../apis/user'\nimport './index.scss'\n\n\nexport default function ImageSharePage(props) {\n\n    const { search } = useLocation()\n    const [ urlmd5, setUrlMd5 ] = useState(\"\")\n    const [loading, setLoading] = useState(false)\n    const [shareImageInfo, setShareImageInfo] = useState({url: '', user: '', time: '', pv: 0})\n    const [showImageInfo, setShowImageInfo] = useState(false)\n    \n    // 获取地址栏中urlmd5参数的值\n    const getUrlMd5Params = (search) => {\n        // search格式 : ?urlmd5=xxxxxxxx ,所以需要从第一个字符截取\n        const paramString = search.substring(1)\n        const searchParams = new URLSearchParams(paramString)\n        const urlMd5 = searchParams.get('urlmd5') || \"\"\n        // console.log('从地址栏中获取的urlmd5值为:', urlMd5)\n        setUrlMd5(urlMd5)\n        return urlMd5\n    }\n    // 获取图片链接\n    const getShareImageUrl = () => {\n        const urlmd5 = getUrlMd5Params(search)\n        browseShareImage({urlmd5})\n        .then(data => {\n            // console.log('正在走成功回调',data)\n            const { code = 0 } = data\n            if(code === 0) {\n                const {url, user, time, pv} = data\n                setShareImageInfo({url, user, time, pv})\n                \n                setShowImageInfo(true)\n            }else{\n                let errMsg = '文件已经被删除'\n                message.error(errMsg)\n            }\n            \n            \n            \n\n        })\n    }\n    // 复制提取成功的图片url\n    const copyImageUrl = () => {\n        \n        let transfer = document.createElement('input');\n        document.body.appendChild(transfer);\n        transfer.value = shareImageInfo.url  // 这里表示想要复制的内容\n        transfer.focus();\n        transfer.select();\n        if (document.execCommand('copy')) {\n            document.execCommand('copy');\n        }\n        transfer.blur();\n        message.success('已复制到剪切板')\n        document.body.removeChild(transfer);      \n    }\n\n    useEffect(() => {\n        getShareImageUrl()\n    }, [])\n\n    return (\n        <div className=\"imgInfoCon\">   \n            <div>\n                <Card\n                    hoverable\n                    title=\"分享图片\"\n                    style={{ width: 800, marginTop: 20 }}\n                >\n\n                    <Descriptions column={3}>\n                        <Descriptions.Item label=\"分享者\">{shareImageInfo.user}</Descriptions.Item>\n                        <Descriptions.Item label=\"浏览次数\">{shareImageInfo.pv}</Descriptions.Item>\n                        <Descriptions.Item label=\"分享时间\">{shareImageInfo.time}</Descriptions.Item>\n                        <Descriptions.Item label=\"图片链接\">\n                            { shareImageInfo.url.length > 0 ? (<div>{shareImageInfo.url} <CopyOutlined onClick={() => { copyImageUrl() }} style={{marginLeft: 10}}/></div>): null }\n                        </Descriptions.Item>    \n                    </Descriptions>\n\n                    { shareImageInfo.url.length > 0 ? (<Image\n                        width={300}\n                        height={300}\n                        src={shareImageInfo.url}\n                    />) : (<Image\n                        width={300}\n                        height={300}\n                        src=\"error\"\n                        fallback=\"data:image/png;base64,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\"\n                    />)}\n                </Card>\n            </div>\n                \n        </div>\n             \n        \n    )\n}","import { HomeOutlined, LockOutlined, SettingOutlined, FolderOutlined, \n    FolderViewOutlined, AppstoreOutlined, BarsOutlined, FileImageOutlined } from '@ant-design/icons';\n\n\nconst menus = [{\n    title: '我的文件',\n    key: 'myFiles',\n    icon: FolderOutlined,\n    subMenus: [{\n        title: '文件列表',\n        icon: AppstoreOutlined,\n        key: 'myFilesList',\n        href: '/myFiles'\n    }]\n},\n{\n    title: '共享文件',\n    key: 'shareFiles',\n    icon: FolderViewOutlined,\n    subMenus: [{\n        title: '文件列表',\n        icon: AppstoreOutlined,\n        key: 'shareFilesList',\n        href: '/shareFiles'\n    },{\n        title: '我的共享图片',\n        icon: FileImageOutlined,\n        key: 'myShareImages',\n        href: '/myShareImages'\n    },{\n        title: '下载榜',\n        key: 'downloadRankingList',\n        icon: BarsOutlined,\n        href: '/downloadRankingList'\n    }]  \n},\n{\n    title: '设置',\n    icon: SettingOutlined,\n    key: 'settings',\n    subMenus: [{\n        title: '退出登录',\n        icon: LockOutlined,\n        key: 'logout',\n        href: '/logout'\n    }]\n}];\n\n\nexport default menus;","export default __webpack_public_path__ + \"static/media/logo200.dfd05ae9.png\";","import React, { useState } from 'react';\nimport { Menu } from 'antd';\nimport { Link } from 'react-router-dom';\nimport menus from './menus';\n// import checkAuth from '../../auth/checkAuth';\nimport scss from './index.module.scss';\nimport { getCookie } from '../../utils/utils';\nimport logoImage from '../../assets/logo200.png'\n\nconst { SubMenu } = Menu;\n\nfunction renderMenu(menu) {\n    const Icon = menu.icon;\n\n\n    if (menu.subMenus && menu.subMenus.length > 0) {\n        const subMenus = menu.subMenus\n\n        return (\n            <SubMenu key={menu.key}\n                title={\n                    <span>\n                        <Icon />\n                        <span>{menu.title}</span>\n                    </span>\n                }>\n                {subMenus.map(subMenu => renderMenu(subMenu))}        \n            </SubMenu>\n        );\n    } else {\n        return (\n            <Menu.Item key={menu.key}>\n                <Link className={scss.link} to={menu.href}>\n                    <Icon />\n                    <span>{menu.title}</span>\n                </Link>\n            </Menu.Item>\n        );\n    }\n}\n\n// function getHrefMenuKeys(menus, href) {\n//     let menuKeys = [];\n//     for (let menu of menus) {\n//         if (menu.subMenus) {\n//             menuKeys = menuKeys.concat(getHrefMenuKeys(menu.subMenus, href))\n//         } else if (menu.href === href) {\n//             return menuKeys;\n//         }\n//     }\n// }\n\nfunction getDefaultOpenKeysAndSelectedKeys() {\n    // const href = window.location.hash.replace('#', '');\n    let defaultOpenKeys, defaultSelectedKeys;\n    // for(let menu of menus) {\n    //     if(menu.subMenus) {\n\n    //         defaultOpenKeys.push(menu.key);\n    //         let flag = true;\n    //         let subMenus = menu.subMenus;\n    //         while(flag) {\n    //             for(let subMenu of subMenus) {\n    //                 if(subMenu.href === href) {\n    //                     defaultSelectedKeys = [subMenu.href];\n    //                     break;\n    //                 }else if(subMenu.subMenus) {\n\n    //                 }\n    //             }\n    //         }\n    //     }else {\n    //         defaultOpenKeys = [];\n    //     }\n    // }\n    return {\n        defaultOpenKeys,\n        defaultSelectedKeys\n    }\n}\n\nexport default function NavMenu() {\n    const [collapsed] = useState(false);\n    const { defaultOpenKeys, defaultSelectedKeys } = getDefaultOpenKeysAndSelectedKeys();\n    \n    const username = getCookie('userName');\n\n    return (\n    <div className={scss.navMenu}>\n        <div className={scss.userInfo}>\n            <img alt=\"logo\" src={logoImage} />\n            <div className={scss.username}>{username}</div>\n        </div>\n        <Menu\n            defaultSelectedKeys={defaultSelectedKeys}\n            defaultOpenKeys={defaultOpenKeys}\n            mode=\"inline\"\n            theme=\"dark\"\n            inlineCollapsed={collapsed}\n        >\n            {menus.map(menu => renderMenu(menu))}\n        </Menu>\n    </div>\n    )\n}","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { getCookie } from '../../utils/utils';\n\nexport default function PrivateRoute({ children, ...rest }) {\n    const token = getCookie('token');\n    const userName = getCookie('userName');\n    return (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                token && userName ? (\n                    children\n                ) : (\n                        <Redirect\n                            to={{\n                                pathname: `/login`,\n                                state: { from: location }\n                            }}\n                        />\n                    )\n            }\n        />\n    );\n}","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport { routes, mainRoutes } from './pages';\nimport NavMenu from './components/NavMenu';\nimport { ConfigProvider, message } from 'antd';\nimport './App.less';\nimport PrivateRoute from './components/PrivateRoute';\nimport zhCN from 'antd/es/locale/zh_CN';\nimport 'moment/locale/zh-cn';\n\nmessage.config({\n  top: 10,\n  duration: 1.5,\n  maxCount: 3,\n  rtl: true,\n});\n\nfunction App() {\n  return (\n    <ConfigProvider locale={zhCN}>\n      <div className=\"App\">\n        <Router>\n          <Switch>\n            {\n              mainRoutes.map(({ path, component: C, exact }) => {\n                return <Route key={path} path={path} exact={exact}><C /></Route>\n              })\n            }\n\n            <Route>\n              <NavMenu />\n              <Switch>\n                {\n                  routes.map(({ path, component: C, exact }) => {\n                    return <PrivateRoute key={path} path={path} exact={exact}><div className=\"main-page\"><C /></div></PrivateRoute>\n                  })\n                }\n              </Switch>\n            </Route>\n\n          </Switch>\n\n        </Router>\n\n      </div>\n    </ConfigProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}